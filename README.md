# svm1
利用电压数据来处理预测间隙大小
首先从问题定义出发，要知道就要得知所有和间隙有关的量，比如浓度，电压，电流，压力，各种传感器得来的数据。但这里有必要用折磨多的传感器吗
从现有的知识可以知道间隙在某个范围内是与电压成线性关系的，那么就利用电压数据来作为模型的输入，这样特征就被选定了，不需要再去提取特征
既然选择电压就要看看电压与间隙的关系。
从图中可以看出一个间隙对应着不同的电压值，当然这是万用表测出来，是一种平均电压，
这种电压变动并不是因为噪声，而是因为项目中添加的静电驱动结构，
![image](https://github.com/chenglu66/svm1/blob/master/1123.jpg)
从图中可以看出电压和间隙应该是一中非线性的关系，从下面一幅图中可以明显看出整个电压信号是呈周期过来的。因为采样10w个信号不同的信号仅有128个
![image](https://github.com/chenglu66/svm1/blob/master/正常加工电压.jpg)
下面是该波形的还原，因为电源的频率较高所以采样失真比较严重。
![image](https://github.com/chenglu66/svm1/blob/master/%E7%94%B5%E5%8E%8B%E8%BF%98%E5%8E%9F%E5%9B%BE.png)
不过从图中我们可以看出电压信号是一种周期，只要我能找到这个周期，在找出具体的间隙值大小。这样就可以把预测搞定了。
下面来搞定周期，直接拿采样的数据进行观察，发现10个为一个周期，但是里面重复比较多，若是选择特征的数目过多，
根据理论可以知道，特征越多，需要的样本数据也就越多，
而整个实验过程中因为采样设备和进给设备精度的问题不可能收集到这么多数据，因此有两种选择，一是根据相关性来去除一部分特征，而是对原数据进行平移变化
来认为增加数据。还有就是改变设备精度，但是考虑到电源的频率是200kHZ，要想频率达到400KHZ以上，AD转换器的转换时间要在2us以内，
那么传统的AD是行不通的，因此只能采用第一种方法，下面就要看怎么去掉特征，因为我采样是序列，所以我也不清楚哪个在前哪个在后，
因此样本数据要打乱，重拍。加噪声信号。
![image](https://github.com/chenglu66/svm1/blob/master/正常工作电压.jpg)
数据为什么会这样需要说明：因为测量间隙过程中我没有办法获得间隙的大小，无论是激光还是超声波都无法达到需要的测量精度，
所以我想把数据做简单的正常加工电压和非正常加工分类，下面就是特征为什么选四个，没什么我觉得开心而已。（太多不好，太少用不能反映特性）
所以对原有数据进行了随机选择（根据大致间隙范围）
我怎么保证我随机选择数据和真实数据不会有太大误差，假设随机选择数据有一个空间是和真实相近的话，那么我做pca肯定能发现：
![image](https://github.com/chenglu66/svm1/blob/master/PCA降维.png)
从图中也可以看出两者的相似性
下面数据这块是完成了，怎么选择模型，我想与分类器距离越远则说明间隙越大，那么直接用距离做分类的，有SVM而且svm可以处理非线性数据。
其实LR也可以，不过效果不如svm表现的好。
下面就是调参数，比较简单，主要难在数据的提取。
下面是预测数据的曲线。
![image](https://github.com/chenglu66/svm1/blob/master/电压与间隙预测值的关系.png)
实物图对比
未加入控制：
![image](https://github.com/chenglu66/svm1/blob/master/%E5%8A%A0%E5%B7%A52.jpg)
加入控制后可以看出整个加工工件较为均匀，不存在刚开始的那种上头宽中间窄的效果。
![image](https://github.com/chenglu66/svm1/blob/master/777777.jpg)
